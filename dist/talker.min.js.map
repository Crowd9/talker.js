{"version":3,"file":"talker.min.js","sources":["?","../src/talker.js"],"names":["exports","global","TALKER_TYPE","TALKER_ERR_TIMEOUT","_module","module","c","f","g","h","setImmediate","process","nextTick","setTimeout","m","l","a","k","b","length","then","n","e","d","TypeError","call","apply","arguments","push","window","pinkySwear","objectCreate","proto","ctor","prototype","Talker","remoteWindow","remoteOrigin","this","timeout","handshaken","handshake","_id","_queue","_sent","_this","addEventListener","messageEvent","_receiveMessage","_sendHandshake","send","namespace","data","responseToId","message","OutgoingMessage","promise","id","_flushQueue","Error","object","isHandshake","JSON","parse","_isSafeMessage","source","origin","type","handshakeConfirmation","_handleHandshake","_handleMessage","safeSource","safeOrigin","safeType","rawObject","IncomingMessage","responseId","_respondToMessage","_broadcastMessage","onMessage","confirmation","handshakeType","_postMessage","_nextId","postMessage","stringify","shift","Message","talker","constructor","toJSON","respond"],"mappings":"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"}